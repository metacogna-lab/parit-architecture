name = "parti-supervisor"
main = "src/index.js"
compatibility_date = "2024-01-01"

# ============================================================================
# D1 Database Bindings
# ============================================================================
[[d1_databases]]
binding = "DB"
database_name = "parti_db_dev"
database_id = "d3e6d447-a932-4d6a-96b0-23956b64897b"

# ============================================================================
# R2 Storage Bindings
# ============================================================================
[[r2_buckets]]
binding = "STORAGE"
bucket_name = "parti-artifacts"

# ============================================================================
# Service Bindings (Inter-Worker Communication)
# ============================================================================
[[services]]
binding = "PRD_AGENT"
service = "parti-prd-agent"

[[services]]
binding = "DATA_AGENT"
service = "parti-data-agent"

[[services]]
binding = "DESIGN_AGENT"
service = "parti-design-agent"

[[services]]
binding = "LOGIC_AGENT"
service = "parti-logic-agent"

[[services]]
binding = "API_AGENT"
service = "parti-api-agent"

[[services]]
binding = "FRONTEND_AGENT"
service = "parti-frontend-agent"

[[services]]
binding = "DEPLOYMENT_AGENT"
service = "parti-deployment-agent"

# ============================================================================
# Production Environment Configuration
# ============================================================================
[env.production]
# Service bindings for production environment (workers deployed with -production suffix)
[[env.production.services]]
binding = "PRD_AGENT"
service = "parti-prd-agent-production"

[[env.production.services]]
binding = "DATA_AGENT"
service = "parti-data-agent-production"

[[env.production.services]]
binding = "DESIGN_AGENT"
service = "parti-design-agent-production"

[[env.production.services]]
binding = "LOGIC_AGENT"
service = "parti-logic-agent-production"

[[env.production.services]]
binding = "API_AGENT"
service = "parti-api-agent-production"

[[env.production.services]]
binding = "FRONTEND_AGENT"
service = "parti-frontend-agent-production"

[[env.production.services]]
binding = "DEPLOYMENT_AGENT"
service = "parti-deployment-agent-production"
